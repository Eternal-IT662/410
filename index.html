<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>BeeSchedule</title>
<style>
  body { background: orange; font-family: Arial, sans-serif; color: white; text-align: center; }
  input { padding: 5px; margin: 3px; }
  button { padding: 5px 10px; margin: 5px; cursor: pointer; border-radius: 5px; border: none; background: brown; color: white; }
  ul { list-style: none; padding: 0; max-width: 400px; margin: 10px auto; text-align: left; }
  li { background: white; color: brown; padding: 5px; margin: 3px 0; border-radius: 4px; display: flex; justify-content: space-between; }
  li span { flex: 1; }
</style>
</head>
<body>

<h1>Welcome to BeeSchedule!</h1>
<p>Let's Get Start!</p>
<button onclick="showMainPage()">Start</button>

<div id="mainPage" style="display:none;">
  <h2>- BeeSchedule -</h2>
  <input type="text" id="subject" placeholder="Subject Name">
  <input type="text" id="details" placeholder="Details">
  <input type="date" id="dueDate">
  <br>
  <button onclick="addHomework()">Add Homework</button>
  <button onclick="deleteHomework()">Delete Selected</button>
  <ul id="homeworkList"></ul>
</div>

<script>
let selectedIndex = null;

// โหลดการบ้านจาก localStorage
let homeworkData = JSON.parse(localStorage.getItem('homeworkData') || '[]');

function showMainPage() {
  document.querySelector("button").style.display = "none";
  document.querySelector("p").style.display = "none";
  document.getElementById("mainPage").style.display = "block";
  updateList();
}

function updateList() {
  const list = document.getElementById('homeworkList');
  list.innerHTML = '';
  homeworkData.sort((a,b) => a.dueDate.localeCompare(b.dueDate));
  homeworkData.forEach((hw, index) => {
    const li = document.createElement('li');
    li.innerHTML = `<span>${hw.subject} - ${hw.details} - Due: ${hw.dueDate}</span>`;
    li.onclick = () => {
      Array.from(list.children).forEach(item => item.style.background='white');
      li.style.background = '#ffd700';
      selectedIndex = index;
    }
    list.appendChild(li);
  });
}

function addHomework() {
  const subject = document.getElementById('subject').value.trim();
  const details = document.getElementById('details').value.trim();
  const dueDate = document.getElementById('dueDate').value;

  if(!subject || !dueDate){
    alert("กรุณากรอกชื่อวิชาและวันที่ส่ง");
    return;
  }

  homeworkData.push({subject, details, dueDate});
  localStorage.setItem('homeworkData', JSON.stringify(homeworkData));

  document.getElementById('subject').value = '';
  document.getElementById('details').value = '';
  document.getElementById('dueDate').value = '';
  updateList();
}

function deleteHomework() {
  if(selectedIndex === null){
    alert("กรุณาเลือกการบ้านที่จะลบ");
    return;
  }
  homeworkData.splice(selectedIndex, 1);
  localStorage.setItem('homeworkData', JSON.stringify(homeworkData));
  selectedIndex = null;
  updateList();
}
</script>

</body>
</html>
